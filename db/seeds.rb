# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).
#
# Examples:
#
#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])
#   Mayor.create(name: 'Emanuel', city: cities.first)
libraries = [
  {
      "name": "Batz, Nicolas and Senger Library",
      "address": "59256 Ziemann Center, Kirstinstad",
      "phone": "1-705-892-7616 x0498"
  },
  {
      "name": "Baumbach Group Library",
      "address": "078 Kale Village, Port Johnnyton",
      "phone": "(978) 063-1783 x32688"
  },
  {
      "name": "Bruen Inc Library",
      "address": "83553 Walsh Ridge, Lefflerchester",
      "phone": "931.117.5725 x0110"
  },
  {
      "name": "Buckridge LLC Library",
      "address": "218 Jazmyn Knoll, Port Pearlberg",
      "phone": "1-984-482-1355 x1359"
  },
  {
      "name": "Cole LLC Library",
      "address": "650 Nikki Heights, North Alisaport",
      "phone": "634.207.3170"
  },
  {
      "name": "Durgan - Hudson Library",
      "address": "2436 Champlin Park, South Yvonneberg",
      "phone": "949.420.4054"
  },
  {
      "name": "Ebert - Rice Library",
      "address": "7590 Blanda Loaf, Lake Wade",
      "phone": "973.525.5946 x1218"
  },
  {
      "name": "Feeney - Reichert Library",
      "address": "3741 Gleichner Gateway, Port Charlie",
      "phone": "1-973-753-6396"
  },
  {
      "name": "Friesen - Schmeler Library chennai",
      "address": "3130 Leland Lakes, Misaelhaven",
      "phone": "718-892-3296"
  },
  {
      "name": "Gaylord, Grimes and Wolff Library",
      "address": "663 Bashirian Throughway, New Heaven",
      "phone": "1-555-072-1570"
  },
  {
      "name": "Gislason, O'Conner and Schuppe Library",
      "address": "744 Alexandra Ridge, Legrosshire",
      "phone": "(028) 250-4074 x94875"
  },
  {
      "name": "Gleason, Huels and Dooley Library",
      "address": "439 Mitchell Islands, Wainoville",
      "phone": "(283) 830-2772"
  },
  {
      "name": "Harber LLC Library",
      "address": "450 Adolf Unions, Port Otho",
      "phone": "1-751-371-9870 x099"
  },
  {
      "name": "Hilpert and Sons Library",
      "address": "439 Ebert Circle, Lake Miahaven",
      "phone": "192.651.6280 x106"
  },
  {
      "name": "Kihn - Haag Library",
      "address": "68882 O'Connell Causeway, Breitenbergshire",
      "phone": "1-534-307-8142"
  },
  {
      "name": "Kihn, Wisozk and Powlowski Library",
      "address": "9830 Stark Cape, Lake Kaylee",
      "phone": "966-279-8435 x7362"
  },
  {
      "name": "Konopelski, Robel and Mitchell Library",
      "address": "7860 Reba Highway, Nienowville",
      "phone": "(194) 926-7395"
  },
  {
      "name": "Kuhic - Ward Library",
      "address": "366 Kristin Trace, Lake Emery",
      "phone": "(725) 739-3142 x14950"
  },
  {
      "name": "Kulas and Sons Library",
      "address": "8053 Gerlach Stream, Strosinmouth",
      "phone": "398.532.0970"
  },
  {
      "name": "Kutch Group Library",
      "address": "7506 Jaleel Lake, North Rhiannonshire",
      "phone": "813.067.3994 x62361"
  },
  {
      "name": "O'Hara, Abshire and Bernier Library",
      "address": "80408 Halvorson Knoll, Mackside",
      "phone": "(098) 939-7821 x4815"
  },
  {
      "name": "O'Hara, Will and Leuschke Library",
      "address": "7773 Haag Lock, East Jayneton",
      "phone": "158.790.7619 x85903"
  },
  {
      "name": "Ondricka, Grimes and Towne Library",
      "address": "019 Dicki Highway, Lake Abigayle",
      "phone": "667-249-1044"
  },
  {
      "name": "Pfannerstill, Shields and Predovic Library",
      "address": "77177 Dallin Flat, Emmerichmouth",
      "phone": "(084) 381-8795"
  },
  {
      "name": "Reichel, Murray and Blick Library",
      "address": "83624 Hahn Bridge, Lake Owenbury",
      "phone": "315.860.9248 x210"
  },
  {
      "name": "Roberts - Green Library",
      "address": "1194 Ebert Highway, Port Brainmouth",
      "phone": "786.518.1389"
  },
  {
      "name": "Rogahn, Corkery and Toy Library",
      "address": "8693 Hermann Flat, Kihnbury",
      "phone": "1-195-271-4598"
  },
  {
      "name": "Schamberger Inc Library",
      "address": "445 Lexi Circles, Alejandraport",
      "phone": "837.761.8825"
  },
  {
      "name": "Stokes, Champlin and Watsica Library",
      "address": "2397 Esmeralda Junction, North Narcisoside",
      "phone": "443.363.8679"
  },
  {
      "name": "Streich - Reynolds Library",
      "address": "2569 Kaela Plains, Krajcikbury",
      "phone": "(828) 649-3843"
  },
  {
      "name": "test123",
      "address": "",
      "phone": ""
  },
  {
      "name": "Waelchi, Powlowski and Kertzmann Library",
      "address": "92437 Nat Mountains, New Clemensside",
      "phone": "049-685-0962"
  },
  {
      "name": "Wehner, Zboncak and Berge Library",
      "address": "4454 Glover Vista, West Kariane",
      "phone": "1-684-083-4036 x228"
  },
  {
      "name": "Weimann, Weimann and Hills Library",
      "address": "901 Joel Mission, West Justusmouth",
      "phone": "1-719-371-0436 x051"
  },
  {
      "name": "Wisoky, Jerde and Kunde Library",
      "address": "409 Stefanie Circle, West Heloisefurt",
      "phone": "436-468-4047"
  },
  {
      "name": "Zboncak - Willms Library",
      "address": "54722 Labadie Crescent, Lake Jermaine",
      "phone": "(848) 352-5592 x9283"
  }
]

libraries.each do |library_data|
  Library.create!(
    name: library_data[:name],
    address: library_data[:address],
    phone: library_data[:phone]
  )
end

pub1 = PublishingHouse.create(name: "ABC Publisher", discount: 40)
pub2 = PublishingHouse.create(name: "Acme Publishing House", discount: 50)
pub3 = PublishingHouse.create(name: "Foobar Corporation", discount: 55)

author1 = Author.create(name: "James Jackson")
author2 = Author.create(name: "Roberta Rock")
author3 = Author.create(name: "Daniel Duck")
author4 = Author.create(name: "Amanda Djidjinski")
author5 = Author.create(name: "Zoe Zack")
author6 = Author.create(name: "Bill Burray")
author7 = Author.create(name: "Charlie Chuck")

book1 = Book.create(title: "The Great Escape", author: author7, publisher: pub1, price: 24.20)
book2 = Book.create(title: "Saving Myself", author: author6, publisher: pub1, price: 14.13)
book3 = Book.create(title: "The Killer Doctors", author: author5, publisher: pub1, price: 15.12)
book4 = Book.create(title: "Marianne", author: author4, publisher: pub1, price: 10.50)
book5 = Book.create(title: "On the Verge of Salvation", author: author4, publisher: pub2, price: 11.76)
book6 = Book.create(title: "Fields of L", author: author3, publisher: pub2, price: 27.87)
book7 = Book.create(title: "Waterfront", author: author2, publisher: pub2, price: 11.97)
book8 = Book.create(title: "Bored as Hell", author: author6, publisher: pub3, price: 10.96)
book9 = Book.create(title: "History of the Silk Road", author: author7, publisher: pub3, price: 8.10)
booka = Book.create(title: "Something for Later", author: author1, publisher: author1, price: 9.54)
bookb = Book.create(title: "What If", author: author3, publisher: author3, price: 13.32)
bookc = Book.create(title: "Lilly Reborn", author: author4, publisher: pub3, price: 16.43)
bookd = Book.create(title: "Anathema", author: author5, publisher: author5, price: 9.41)
booke = Book.create(title: "Best Of", author: author2, publisher: pub3, price: 12.24)
bookf = Book.create(title: "Anyway", author: author6, publisher: pub3, price: 19.99)

50.times do
  PublishingHouse.create(name: Faker::Book.publisher, discount: Faker::Number.between(from: 1, to: 50))
end

100.times do
  Author.create(name: Faker::Name.name)
end

publishing_house_size = PublishingHouse.count
author_size = Author.count

3000.times do
  publishing_house = PublishingHouse.find(Faker::Number.between(from: 1, to: publishing_house_size))
  author = Author.find(Faker::Number.between(from: 1, to: author_size))

  publisher = Random.rand(2) == 0 ? author : publishing_house

  Book.create(title: Faker::Book.title, author: author, publisher: publisher, price: Faker::Number.decimal(l_digits: 2))
end

# iterate over all books all books and randomly assign anywhere of 0 to 5 libraries to the book's libraries association
Book.all.each do |book|
  book.libraries << Library.order("RANDOM()").limit(rand(5))
  book.save
end